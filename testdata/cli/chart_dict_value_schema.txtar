# Dict value fields get scalar type instead of unconstrained.
# https://github.com/cue-exp/helm2cue/issues/32
exec helm2cue chart chartdir outdir
cmp stderr stderr.golden
cmp outdir/values.cue expected/values.cue

-- chartdir/Chart.yaml --
apiVersion: v2
name: test-app
version: 0.1.0
-- chartdir/values.yaml --
annotations:
  key: value
-- chartdir/templates/_helpers.tpl --
{{- define "render" -}}
{{ .value | toYaml }}
{{- end -}}
-- chartdir/templates/test.yaml --
metadata:
  annotations:
    {{- include "render" (dict "value" .Values.annotations) | nindent 4 }}
-- stderr.golden --
converted 1/1 templates from test-app
-- expected/values.cue --
// Code generated by helm2cue; DO NOT EDIT.

package test_app

#values: {
	annotations!: _
	...
}
