eq and ne comparison operators in conditions.

-- values.yaml --
service:
  type: ClusterIP
  clusterIP: 10.0.0.1
-- helm_output.yaml --
apiVersion: v1
kind: Service
spec:
  type: ClusterIP
  clusterIP: 10.0.0.1
  ports:
    - port: 80
-- input.yaml --
apiVersion: v1
kind: Service
spec:
  type: {{ .Values.service.type }}
  {{- if eq .Values.service.type "ClusterIP" }}
  clusterIP: {{ .Values.service.clusterIP }}
  {{- end }}
  {{- if ne .Values.service.type "ExternalName" }}
  ports:
    - port: 80
  {{- end }}
-- output.cue --
import "struct"

#values: {
	service?: {
		type!:      bool | number | string | null
		clusterIP!: bool | number | string | null
		...
	}
	...
}

apiVersion: "v1"
kind:       "Service"
spec: {
	type: #values.service.type
	if #values.service.type == "ClusterIP" {
		clusterIP: #values.service.clusterIP
	}
	if #values.service.type != "ExternalName" {
		ports: [
			{
				port: 80
			},
		]
	}
}
_nonzero: {
	#arg?: _
	[if #arg != _|_ {
		[
			if (#arg & int) != _|_ {#arg != 0},
			if (#arg & string) != _|_ {#arg != ""},
			if (#arg & float) != _|_ {#arg != 0.0},
			if (#arg & bool) != _|_ {#arg},
			if (#arg & [...]) != _|_ {len(#arg) > 0},
			if (#arg & {...}) != _|_ {(#arg & struct.MaxFields(0)) == _|_},
			false,
		][0]
	}, false][0]
}
