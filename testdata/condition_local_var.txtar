Condition on local variable field access from range.

-- values.yaml --
routes:
  - name: web
    enabled: true
  - name: api
    enabled: false
-- input.yaml --
apiVersion: v1
kind: ConfigMap
metadata:
  name: test
data:
{{- range $route := .Values.routes }}
  {{- if $route.enabled }}
  {{ $route.name }}: active
  {{- end }}
{{- end }}
-- helm_output.yaml --
apiVersion: v1
kind: ConfigMap
metadata:
  name: test
data:
  web: active
-- output.cue --
import "struct"

#values: {
	routes!: _
	...
}

apiVersion: "v1"
kind:       "ConfigMap"
metadata: name: "test"
data: {
	for _, _range0 in #values.routes {
		if (_nonzero & {#arg: _range0.enabled, _}) {
			(_range0.name): "active"
		}
	}
}
_nonzero: {
	#arg?: _
	[if #arg != _|_ {
		[
			if (#arg & int) != _|_ {#arg != 0},
			if (#arg & string) != _|_ {#arg != ""},
			if (#arg & float) != _|_ {#arg != 0.0},
			if (#arg & bool) != _|_ {#arg},
			if (#arg & [...]) != _|_ {len(#arg) > 0},
			if (#arg & {...}) != _|_ {(#arg & struct.MaxFields(0)) == _|_},
			false,
		][0]
	}, false][0]
}
